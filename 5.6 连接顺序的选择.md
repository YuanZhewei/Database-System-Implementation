### 左右参数的意义

假定选择一个物理计划时，选择一趟连接。假定该连接的左参数作为较小的关系存储在主存的数据结构中。该关系称为**构造用关系**。每次一块读入连接的右参数，称为**探查用关系**，并将它的元组与已存储的关系进行匹配。以参数作为区分的其他连接算法包括：

1. 嵌套循环链接，在这种连接中左参数是外部循环关系

2. 索引连接，这种连接的右参数有索引

###连接树

#### 左深连接树

一棵二叉树如果所有右子节点都是叶节点的话，它就是**左深树**。所有左子节点都是叶节点的话，就是**右深树**。如果都不是的话，就是**浓密树**，**左深树**作为连接顺序有两个优点：

1. 对于给定树叶的可能的左深树的数目很大，但比所有树的数目小。因此如果我们将搜索限定在左深树，查询计划的搜索可用于比较大的查询。
2. 用于连接的左深树可以和通用的连接算法很好的交互，尤其是嵌套循环连接和一趟连接。基于左深树和这些算法的查询计划将会比非左深树所用的同样的算法更有效。

$n$个关系的树形状$T(n)$的所有数目有以下的递归给出。
$$
\begin{equation}
\left \{
\begin{array}{lr}
T(1) = 1 & \\
T(n) = \sum_{i = 1}^{n-1}T(i)T(n-i) 
\end{array}
\right.
\end{equation}
$$
$T(n)$的前几个值为：

|  $n$   | $1$  | $2$  | $3$  | $4$  | $6$  | $7$  |
| :----: | :--: | :--: | :--: | :--: | :--: | :--: |
| $T(n)$ | $1$  | $1$  | $2$  | $5$  | $14$ | $42$ |

将$T(n)$乘上$n!$，就得到当树叶表示各个关系时所有树的数目。

考虑以上曾经提到的左深树的第二个优点：

1. 如果用的是一趟连接，并且“构造用关系”在左边，则任何时候所需的内存都比对同样关系用右深树或浓密树的情况要小

2. 如果是使用嵌套循环连接，外层循环的关系在左边，则我们避免多于一次地构建任意中间关系。

考虑$R \Join S \Join T \Join U$的左深树，假设对三个$\Join$运算的每一个进行简单的一趟连接，以左参数作为构造用关系，即左参数将被存储在主存中，要计算$R\Join S$我们需要在内存中保留$R$，并且在计算$R\Join S$的过程中在主存保留结果，这样，我们需要$B(R) + B(R \Join S)$的主存缓冲区。如果选择最小的关系作为$R$，并且有一个选择运算符使$R$更小，则可能得到所需的缓冲区容量。
算出$R\Join S$后，需要将该关系与$T$做连接。此时$R$的缓冲区不再需要，可以用来存储$(R\Join S)\Join T$的结果。一般来说，一趟连接方法计算的左深树需要的主存空间至多是任何时候两个临时空间所需的空间。
考虑右深树的实现。首先将$R$载入主存缓冲区，因为左参数往往是“构造用关系”。然后构建$S\Join(T\Join U)$并将其用于跟连接的探查用关系。要计算$S\Join(T \Join U)$，将$S$放入缓冲区，然后计算出$T \Join U$作为$S$的探查用关系。但是$T\Join U$需要先将$T$读入缓冲区。现在内存中有了$R, S,T$。一般，如果试图计算一个有$n$个树叶的右深树，需将$n-1$个关系同事读入内存。

###通过动态规划来选择顺序和分组
略
###带有更具体的代价函数的动态规划
略
###选择连接顺序的贪婪算法
左深树的贪婪算法：
**基础** 以估计连接大小是最开始的关系对开始，这些关系的连接称为当前树。
**介绍** 在所有还没有包含在当前树的关系中，寻找当前树进行连接能生成估计大小最小的关系。以旧的当前树作为左参数，被选中的关系作为右参数来形成新的当前树。