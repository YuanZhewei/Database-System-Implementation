保证并发执行的事务保持一致性的过程被称为**并发控制**。

### 调度

**调度**是一个或多个事务的重要动作的一个序列。

### 串行调度

如果一个调度的动作是先执行一个事务的所有动作，然后执行另一个事务的所有动作，那么这一调度是**串行**的。由于串行调度中动作的顺序只依赖于事务本身的顺序，所有我们用事务列表来表示串行调度。例如，$(T_1, T_2)$和$(T_2, T_1)$。
事务的正确性原则保证每个串行调度都保持数据库状态的一致性。

### 可串行调度

如果存在串行调度$S'$，使得对于每个数据库初态，调度$S$和调度$S'$的效果相同，则调度$S$是**可串行化**的。

非串行的可串行化调度


|    $T_1$     |    $T_2$     | $A$  | $B$  |
| :----------: | :----------: | :--: | :--: |
|              |              | $25$ | $25$ |
| $READ(A,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(A,t)$ |              | 125  |      |
|              | $READ(A,s)$  |      |      |
|              |   $s:=s*2$   |      |      |
|              | $WRITE(A,s)$ | 250  |      |
| $READ(B,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(B,t)$ |              |      | 125  |
|              | $READ(B,s)$  |      |      |
|              |   $s:=s*2$   |      |      |
|              | $WRITE(B,s)$ |      | 250  |

非可串行化的调度
|    $T_1$     |    $T_2$     | $A$  | $B$  |
| :----------: | :----------: | :--: | :--: |
|              |              | $25$ | $25$ |
| $READ(A,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(A,t)$ |              | 125  |      |
|              | $READ(A,s)$  |      |      |
|              |   $s:=s*2$   |      |      |
|              | $WRITE(A,s)$ | 250  |      |
|              | $READ(B,s)$  |      |      |
|              |   $s:=s*2$   |      |      |
|              | $WRITE(B,s)$ |      |  50  |
| $READ(B,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(B,t)$ |              |      | 150  |

### 事务语义的影响

仅仅由于事务细节行为而可串行化的调度。
|    $T_1$     |    $T_2$     | $A$  | $B$  |
| :----------: | :----------: | :--: | :--: |
|              |              | $25$ | $25$ |
| $READ(A,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(A,t)$ |              | 125  |      |
|              | $READ(A,s)$  |      |      |
|              |  $s:=s+200$  |      |      |
|              | $WRITE(A,s)$ | 325  |      |
|              | $READ(B,s)$  |      |      |
|              |  $s:=s+200$  |      |      |
|              | $WRITE(B,s)$ |      | 225  |
| $READ(B,t)$  |              |      |      |
|  $t:=t+100$  |              |      |      |
| $WRITE(B,t)$ |              |      | 325  |

### 事务和调度的一种记法

1. **动作**是形如$r_i(X)$和$w_i(X)$的表达式，分别表示事务$T_i$读或写数据库元素$X$。
2. **事务**$T_i$是具有下标$i$的动作序列
3. 事务集合$T$的调度$S$是一个动作序列，其中对$T$中的每个事务$T_i$，$T_i$中的动作在$S$中出现的顺序和其在$T_i$自身定义出现的顺序一样。我们说$S$是组成它的事务动作的一个**交错**。